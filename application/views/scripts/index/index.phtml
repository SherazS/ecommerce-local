<div id="main">
	<div id="filter-list">
	<?php
	// echo $this->foo;
	echo '<div class="filter-title-div"><span class="filter-title">by category</span></div>';
	foreach ($this->categoryArray as $category) {
		$style = '';
		$url = $this->selectedDevice;
		$action = $category;

		if ($category == $this->selectedCategory) {
        	$style = ' style="border-bottom: 2px solid #444;"';
        	$action = 'all';
        }

        echo "\n<div class=\"filter-link-div\">\n<a href=\"" .
        	$this->url(
            array('controller'=>'index', 'action'=> $action),
            'default',
            true) . '/' . $url . "\" class=\"filter-link\"";

        echo $style;

        echo ">" . $category . "</a>\n</div>\n<div class=\"filter-link-div\">\n<span class=\"filter-separator\">|</span>\n</div>";
	}
	?>
	</div>

	<div id="filter-list">
	<?php
	// echo $this->foo;
	echo '<div class="filter-title-div"><span class="filter-title">by device</span></div>';
	foreach ($this->deviceArray as $device) {
		$style = '';
		$url = $device;
		$action = 'all';
		if ($device == $this->selectedDevice) {
        	$style = 'style="border-bottom: 2px solid #444;"';
        	$url = '';
        }
		

		if($this->selectedCategory) {
			$action = $this->selectedCategory;
		}

        echo "\n<div class=\"filter-link-div\">\n<a href=\"" . 
        	$this->url(
            array('controller'=>'index', 'action'=> $action),
            'default',
            true) . '/' . $url . "\" class=\"filter-link\"";

        echo $style;

        echo ">" . $device . "</a>\n</div>\n<div class=\"filter-link-div\">\n<span class=\"filter-separator\">|</span>\n</div>";
	}
	?>
	</div>

	<div id="product-list">
	<?php
	if(is_array($this->productArray)) {
		foreach ($this->productArray as $product) {
		    echo '<div class="product-item">';
		    foreach ($product as $columnName=>$columnValue) {
		            echo '<div class="' . $columnName . '">' . $columnValue . "</div>\n";
		    }
		    echo "</div>\n";
		}
	}
	else {
		echo $this->productArray;
	}
	?>
	</div>
</div>


<?php
/*
function create_hash($password)
{
    // format: algorithm:iterations:salt:hash
    $salt = base64_encode(mcrypt_create_iv(16, MCRYPT_DEV_URANDOM));
    return 'Salt: ' . $salt . '<br />' . 
           'Hash: ' . hash('sha256', $salt . $password);
}

function retrieve($salt, $password)
{
    return hash('sha256', $salt . $password);
}

echo create_hash('password') . '<br />';
echo 'Hash: ' . retrieve('zfQMEzdpm7HXsk8yx7l87w==', 'password');
echo '<br />Hash: be46e8c0974dc0bd5293f98bd9434255cc48353be13466ee6014c6a9810ca882';
*/
?>